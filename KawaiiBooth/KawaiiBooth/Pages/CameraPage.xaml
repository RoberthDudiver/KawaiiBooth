<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="KawaiiBooth.Pages.CameraPage"
             BackgroundColor="#FFF0F5"
             Title="Photobot"
xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"

             >
    <Grid>
        <Image Source="background.png"
               Aspect="AspectFill"
               Opacity="0.5"
               
               />

        <Grid Padding="10" RowDefinitions="Auto,*,Auto">

        <!-- Título -->
        <Label Text="photobot"
               FontSize="24"
               HorizontalOptions="Center"
               TextColor="Black"
               FontAttributes="Bold"
               Margin="0,10"/>

        <!-- Vista principal -->
        <Grid Grid.Row="1"
              Padding="0"
              Margin="0,10"
              VerticalOptions="FillAndExpand">

            <!-- Marco visual general -->
            <Border Stroke="#F4BBD4"
                    StrokeThickness="10"
                    BackgroundColor="White"
                    StrokeShape="RoundRectangle 30"
                    Padding="0"
                    Margin="10">

                <Grid>
                    <!-- Vista de cámara o imagen -->
              
                        <toolkit:CameraView 
    x:Name="CameraView"
    SelectedCamera="{Binding SelectedCamera}"
    CameraFlashMode="{Binding FlashMode}"
                            
    ZoomFactor="{Binding CurrentZoom}"
    ImageCaptureResolution="{Binding SelectedResolution}"
    />
                        <Image x:Name="PreviewImage"
BackgroundColor="Black" IsVisible="False"
Aspect="AspectFill" />

                        <!-- Semicírculo superior (contador) -->
                    <Border
    x:Name="CountdownSemiCircle"
    WidthRequest="120"
    HeightRequest="60"
    BackgroundColor="#FDE8F0"
    Stroke="#F4BBD4"
    StrokeThickness="5"
    HorizontalOptions="Center"
    VerticalOptions="Start"
    Margin="0,-5,0,0"
    StrokeShape="RoundRectangle 0,0,60,60">

                        <Label
        x:Name="CountdownLabel"
        Text="3"
        FontSize="30"
        HorizontalOptions="Center"
        VerticalOptions="Center"
        TextColor="Red"
        FontAttributes="Bold" />
                    </Border>


                    <!-- Semicírculo inferior (foto actual) -->
                    <Border
    x:Name="PhotoIndexSemiCircle"
    WidthRequest="120"
    HeightRequest="60"
    BackgroundColor="#FDE8F0"
    Stroke="#F4BBD4"
    StrokeThickness="5"
    HorizontalOptions="Center"
    VerticalOptions="End"
    Margin="0,0,0,-5"
    StrokeShape="RoundRectangle 60,60,0,0">

                        <Label
        x:Name="PhotoIndexLabel"
        Text="1-4"
        FontSize="20"
        HorizontalOptions="Center"
        VerticalOptions="Center"
        TextColor="Black"
        FontAttributes="Bold" />
                    </Border>

                </Grid>

            </Border>
        </Grid>

        <!-- Botonera -->
            <Grid Grid.Row="2"
      Margin="0,10,0,20"
      HorizontalOptions="Center">

                <!-- Fondo semitransparente con esquinas redondeadas -->
                <Border BackgroundColor="#CCFFF0F5"  
                    Stroke="#F4BBD4"
            StrokeThickness="2"
            WidthRequest="300"
            HeightRequest="100"
            StrokeShape="RoundRectangle 50"
            VerticalOptions="Center"
            HorizontalOptions="Center"
            />

                    <!-- Botonera encima -->
                    <StackLayout Orientation="Horizontal"
                 HorizontalOptions="Center"
                 VerticalOptions="Center"
                 Spacing="30">

                        <!-- Botón cambiar cámara -->
                        <ImageButton Source="switch_camera.png"
                     WidthRequest="60"
                     HeightRequest="60"
                     BackgroundColor="Pink"
                     CornerRadius="30"
                     Clicked="OnSwitchCameraClicked"/>

                        <!-- Botón tomar foto con borde redondo -->
                        <Border Stroke="HotPink"
                StrokeThickness="3"
                BackgroundColor="White"
                WidthRequest="90"
                HeightRequest="90"
                StrokeShape="RoundRectangle 45"
                VerticalOptions="Center"
                HorizontalOptions="Center">
                            <ImageButton Source="shutter.png"
                         BackgroundColor="Transparent"
                         WidthRequest="80"
                         HeightRequest="80"
                         Clicked="OnTakePhotoClicked" />
                        </Border>

                        <!-- Botón ver foto previa -->
                        <ImageButton Source="preview.png"
                     WidthRequest="60"
                     HeightRequest="60"
                     BackgroundColor="Pink"
                     CornerRadius="30"
                     Clicked="OnPreviewClicked"/>
                    </StackLayout>
            </Grid>

        </Grid>
    
    
</Grid>
</ContentPage>
